{% extends 'base.html' %}

{% block content %}
<div class="navbar">
  <a href="{% url 'job_list' %}">üè† Home</a>
  <a href="{% url 'create_job' %}">‚ûï Add Job</a>
</div>

<h1>My Job Applications</h1>
<br>
  <ul>
    {% for job in jobs %}
      <li>
        <strong>{{ job.position }}</strong> at {{ job.company_name }} <br>
        <small>Status: {{ job.status }} | Applied on: {{ job.application_date }}</small><br>
        <a href="{% url 'update_job' job.pk %}" class="button is-info is-small">Edit</a> |

        <!-- Delete Form with Popup -->
        <form method="POST" action="{% url 'delete_job' job.pk %}" style="display:inline;" onsubmit="return confirmDelete();">
          {% csrf_token %}
          <button type="submit" class="button is-danger is-small">Delete</button>
        </form>
        
        <hr>
      </li>
    {% empty %}
      <li>No jobs added yet.</li>
    {% endfor %}
  </ul>
<script>
    function confirmDelete() {
      return confirm("Are you sure you want to delete this job?");
    }
</script>    
{% endblock %}
